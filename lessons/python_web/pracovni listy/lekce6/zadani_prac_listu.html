<!-- Pracovní list -->
<div class="card mb-5 shadow-sm">
    <div class="card-header bg-danger text-white">
      <h2 class="mb-0"><i class="fas fa-tasks mr-2"></i> Pracovní list: Zápisník citátů</h2>
    </div>
    <div class="card-body">
      <div class="alert alert-secondary mb-4">
        <div class="d-flex">
          <div class="mr-3">
            <i class="fas fa-clipboard-list fa-2x"></i>
          </div>
          <div>
            <h4 class="alert-heading">Zadání úkolu</h4>
            <p>V tomto cvičení vytvoříte jednoduchý zápisník citátů pomocí frameworku Flask. Aplikace umožní uživatelům přidávat své oblíbené citáty, zobrazit je a filtrovat podle autorů.</p>
          </div>
        </div>
      </div>
      
      <div class="row mb-4">
        <div class="col-md-6">
          <div class="card h-100">
            <div class="card-header bg-primary text-white">
              <h5 class="mb-0">Cíl projektu</h5>
            </div>
            <div class="card-body">
              <p>Po dokončení tohoto úkolu budete umět:</p>
              <ul>
                <li>Vytvořit Flask aplikaci s několika routami</li>
                <li>Implementovat zpracování formulářů</li>
                <li>Používat šablony Jinja2</li>
                <li>Pracovat s daty v paměti aplikace</li>
                <li>Vytvořit jednoduchou navigaci mezi stránkami</li>
              </ul>
            </div>
          </div>
        </div>
        <div class="col-md-6">
          <div class="card h-100">
            <div class="card-header bg-success text-white">
              <h5 class="mb-0">Co budete potřebovat</h5>
            </div>
            <div class="card-body">
              <ul>
                <li>Python 3.x nainstalovaný na vašem počítači</li>
                <li>Flask nainstalovaný pomocí <code>pip install flask</code></li>
                <li>Textový editor nebo IDE (např. VSCode, PyCharm)</li>
                <li>Základní znalost HTML a CSS</li>
                <li>Základní znalost Pythonu</li>
              </ul>
            </div>
          </div>
        </div>
      </div>
      
      <div class="accordion" id="workflowAccordion">
        <!-- Krok 1 -->
        <div class="card">
          <div class="card-header bg-light" id="headingOne">
            <h2 class="mb-0">
              <button class="btn btn-link btn-block text-left text-dark" type="button" data-toggle="collapse" data-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                <strong>Krok 1: Základní struktura projektu</strong>
              </button>
            </h2>
          </div>
          <div id="collapseOne" class="collapse show" aria-labelledby="headingOne" data-parent="#workflowAccordion">
            <div class="card-body">
              <p>Vytvořte nový adresář pro projekt a v něm následující strukturu souborů:</p>
              <div class="bg-dark p-3 rounded mb-3 text-white">
                <pre>quotes_app/
    ├── app.py
    ├── templates/
    │   ├── base.html
    │   ├── index.html
    │   └── add.html
    └── static/
        └── style.css</pre>
              </div>
              <p>V souboru <code>app.py</code> začněte s vytvořením základní Flask aplikace:</p>
              <div class="bg-dark p-3 rounded mb-3">
                <pre><code class="language-python">from flask import Flask, render_template, request, redirect, url_for
  
  app = Flask(__name__)
  
  # Ukázková databáze citátů (v reálné aplikaci byste použili skutečnou databázi)
  quotes = [
      {
          'text': 'Život je to, co se děje, když jste zaneprázdněni plánováním něčeho jiného.',
          'author': 'John Lennon'
      },
      {
          'text': 'Štěstí není něco hotového. Přichází z vašich vlastních činů.',
          'author': 'Dalajláma'
      }
  ]
  
  @app.route('/')
  def index():
      return render_template('index.html', quotes=quotes)
  
  if __name__ == '__main__':
      app.run(debug=True)</code></pre>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Krok 2 -->
        <div class="card">
          <div class="card-header bg-light" id="headingTwo">
            <h2 class="mb-0">
              <button class="btn btn-link btn-block text-left collapsed text-dark" type="button" data-toggle="collapse" data-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                <strong>Krok 2: Vytvoření šablon</strong>
              </button>
            </h2>
          </div>
          <div id="collapseTwo" class="collapse" aria-labelledby="headingTwo" data-parent="#workflowAccordion">
            <div class="card-body">
              <p>Vytvořte základní šablony pro vaši aplikaci:</p>
              
              <h5 class="mt-3">base.html</h5>
              <div class="bg-dark p-3 rounded mb-3">
                <pre><code class="language-html">&lt;!DOCTYPE html&gt;
  &lt;html&gt;
  &lt;head&gt;
      &lt;title&gt;{% block title %}Zápisník citátů{% endblock %}&lt;/title&gt;
      &lt;link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"&gt;
      &lt;link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}"&gt;
  &lt;/head&gt;
  &lt;body&gt;
      &lt;nav class="navbar navbar-expand-lg navbar-dark bg-primary mb-4"&gt;
          &lt;div class="container"&gt;
              &lt;a class="navbar-brand" href="{{ url_for('index') }}"&gt;Zápisník citátů&lt;/a&gt;
              &lt;div class="navbar-nav ml-auto"&gt;
                  &lt;a class="nav-item nav-link" href="{{ url_for('index') }}"&gt;Domů&lt;/a&gt;
                  &lt;a class="nav-item nav-link" href="{{ url_for('add_quote') }}"&gt;Přidat citát&lt;/a&gt;
              &lt;/div&gt;
          &lt;/div&gt;
      &lt;/nav&gt;
  
      &lt;div class="container"&gt;
          {% block content %}{% endblock %}
      &lt;/div&gt;
  
      &lt;script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"&gt;&lt;/script&gt;
      &lt;script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"&gt;&lt;/script&gt;
  &lt;/body&gt;
  &lt;/html&gt;</code></pre>
              </div>
              
              <h5 class="mt-3">index.html</h5>
              <div class="bg-dark p-3 rounded mb-3">
                <pre><code class="language-html">{% extends 'base.html' %}
  
  {% block title %}Zápisník citátů - Domů{% endblock %}
  
  {% block content %}
  &lt;h1 class="mb-4"&gt;Oblíbené citáty&lt;/h1&gt;
  
  {% if quotes %}
      &lt;div class="row"&gt;
          {% for quote in quotes %}
              &lt;div class="col-md-6 mb-4"&gt;
                  &lt;div class="card"&gt;
                      &lt;div class="card-body"&gt;
                          &lt;blockquote class="blockquote mb-0"&gt;
                              &lt;p&gt;"{{ quote.text }}"&lt;/p&gt;
                              &lt;footer class="blockquote-footer"&gt;{{ quote.author }}&lt;/footer&gt;
                          &lt;/blockquote&gt;
                      &lt;/div&gt;
                  &lt;/div&gt;
              &lt;/div&gt;
          {% endfor %}
      &lt;/div&gt;
  {% else %}
      &lt;div class="alert alert-info"&gt;Zatím nejsou přidány žádné citáty. Přidejte první!&lt;/div&gt;
  {% endif %}
  
  &lt;a href="{{ url_for('add_quote') }}" class="btn btn-primary"&gt;Přidat nový citát&lt;/a&gt;
  {% endblock %}</code></pre>
              </div>
              
              <h5 class="mt-3">add.html</h5>
              <div class="bg-dark p-3 rounded mb-3">
                <pre><code class="language-html">{% extends 'base.html' %}
  
  {% block title %}Zápisník citátů - Přidat citát{% endblock %}
  
  {% block content %}
  &lt;h1 class="mb-4"&gt;Přidat nový citát&lt;/h1&gt;
  
  &lt;form method="post"&gt;
      &lt;div class="form-group"&gt;
          &lt;label for="quote_text"&gt;Text citátu&lt;/label&gt;
          &lt;textarea class="form-control" id="quote_text" name="quote_text" rows="3" required&gt;&lt;/textarea&gt;
      &lt;/div&gt;
      &lt;div class="form-group"&gt;
          &lt;label for="author"&gt;Autor&lt;/label&gt;
          &lt;input type="text" class="form-control" id="author" name="author" required&gt;
      &lt;/div&gt;
      &lt;button type="submit" class="btn btn-primary"&gt;Uložit citát&lt;/button&gt;
      &lt;a href="{{ url_for('index') }}" class="btn btn-secondary"&gt;Zrušit&lt;/a&gt;
  &lt;/form&gt;
  {% endblock %}</code></pre>
              </div>
              
              <h5 class="mt-3">style.css</h5>
              <div class="bg-dark p-3 rounded mb-3">
                <pre><code class="language-css">body {
      padding-top: 20px;
      background-color: #f5f5f5;
  }
  
  .blockquote {
      font-size: 1.1rem;
      border-left: 5px solid #007bff;
      padding-left: 15px;
  }
  
  .card {
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      transition: box-shadow 0.3s ease;
  }
  
  .card:hover {
      box-shadow: 0 5px 15px rgba(0,0,0,0.2);
  }</code></pre>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Krok 3 -->
        <div class="card">
          <div class="card-header bg-light" id="headingThree">
            <h2 class="mb-0">
              <button class="btn btn-link btn-block text-left collapsed text-dark" type="button" data-toggle="collapse" data-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                <strong>Krok 3: Implementace funkcí pro přidání citátu</strong>
              </button>
            </h2>
          </div>
          <div id="collapseThree" class="collapse" aria-labelledby="headingThree" data-parent="#workflowAccordion">
            <div class="card-body">
              <p>Doplňte aplikaci o funkci pro přidávání nových citátů. Přidejte následující kód do souboru <code>app.py</code>:</p>
              
              <div class="bg-dark p-3 rounded mb-3">
                <pre><code class="language-python">@app.route('/add', methods=['GET', 'POST'])
  def add_quote():
      if request.method == 'POST':
          # Získání dat z formuláře
          quote_text = request.form.get('quote_text')
          author = request.form.get('author')
          
          # Kontrola, zda jsou data platná
          if quote_text and author:
              # Přidání nového citátu do seznamu
              quotes.append({
                  'text': quote_text,
                  'author': author
              })
              # Přesměrování zpět na domovskou stránku
              return redirect(url_for('index'))
      
      # Pokud je metoda GET nebo kontrola selhala, zobrazí se formulář
      return render_template('add.html')</code></pre>
              </div>
              
              <p>Tento kód:</p>
              <ul>
                <li>Vytvoří novou routu <code>/add</code>, která reaguje jak na GET, tak na POST požadavky</li>
                <li>Při POST požadavku získá data z formuláře a přidá nový citát do seznamu</li>
                <li>Při GET požadavku zobrazí formulář pro přidání citátu</li>
              </ul>
            </div>
          </div>
        </div>
        
        <!-- Krok 4 -->
        <div class="card">
          <div class="card-header bg-light" id="headingFour">
            <h2 class="mb-0">
              <button class="btn btn-link btn-block text-left collapsed text-dark" type="button" data-toggle="collapse" data-target="#collapseFour" aria-expanded="false" aria-controls="collapseFour">
                <strong>Krok 4: Přidání filtru podle autora</strong>
              </button>
            </h2>
          </div>
          <div id="collapseFour" class="collapse" aria-labelledby="headingFour" data-parent="#workflowAccordion">
            <div class="card-body">
              <p>Nyní přidáme možnost filtrovat citáty podle autora. Doplňte následující kód do <code>app.py</code>:</p>
              
              <div class="bg-dark p-3 rounded mb-3">
                <pre><code class="language-python">@app.route('/author/<author>')
  def quotes_by_author(author):
      filtered_quotes = [quote for quote in quotes if quote['author'].lower() == author.lower()]
      return render_template('index.html', quotes=filtered_quotes, filter_author=author)</code></pre>
              </div>
              
              <p>Upravte šablonu <code>index.html</code>, aby zobrazovala odkazy na filtrování podle autora:</p>
              
              <div class="bg-dark p-3 rounded mb-3">
                <pre><code class="language-html">{% extends 'base.html' %}
  
  {% block title %}{% if filter_author %}Citáty od {{ filter_author }}{% else %}Zápisník citátů - Domů{% endif %}{% endblock %}
  
  {% block content %}
  &lt;h1 class="mb-4"&gt;{% if filter_author %}Citáty od {{ filter_author }}{% else %}Oblíbené citáty{% endif %}&lt;/h1&gt;
  
  {% if filter_author %}
      &lt;div class="mb-4"&gt;
          &lt;a href="{{ url_for('index') }}" class="btn btn-outline-secondary"&gt;Zobrazit všechny citáty&lt;/a&gt;
      &lt;/div&gt;
  {% endif %}
  
  {% if quotes %}
      &lt;div class="row"&gt;
          {% for quote in quotes %}
              &lt;div class="col-md-6 mb-4"&gt;
                  &lt;div class="card"&gt;
                      &lt;div class="card-body"&gt;
                          &lt;blockquote class="blockquote mb-0"&gt;
                              &lt;p&gt;"{{ quote.text }}"&lt;/p&gt;
                              &lt;footer class="blockquote-footer"&gt;
                                  &lt;a href="{{ url_for('quotes_by_author', author=quote.author) }}"&gt;{{ quote.author }}&lt;/a&gt;
                              &lt;/footer&gt;
                          &lt;/blockquote&gt;
                      &lt;/div&gt;
                  &lt;/div&gt;
              &lt;/div&gt;
          {% endfor %}
      &lt;/div&gt;
  {% else %}
      &lt;div class="alert alert-info"&gt;Nenalezeny žádné citáty.&lt;/div&gt;
  {% endif %}
  
  &lt;a href="{{ url_for('add_quote') }}" class="btn btn-primary"&gt;Přidat nový citát&lt;/a&gt;
  {% endblock %}</code></pre>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Krok 5 -->
        <div class="card">
          <div class="card-header bg-light" id="headingFive">
            <h2 class="mb-0">
              <button class="btn btn-link btn-block text-left collapsed text-dark" type="button" data-toggle="collapse" data-target="#collapseFive" aria-expanded="false" aria-controls="collapseFive">
                <strong>Krok 5: Rozšíření aplikace (bonusové úkoly)</strong>
              </button>
            </h2>
          </div>
          <div id="collapseFive" class="collapse" aria-labelledby="headingFive" data-parent="#workflowAccordion">
            <div class="card-body">
              <p>Pokud jste dokončili základní aplikaci, můžete ji rozšířit o další funkce:</p>
              
              <div class="row">
                <div class="col-md-6">
                  <div class="card mb-3">
                    <div class="card-body">
                      <h5 class="card-title">Mazání citátů</h5>
                      <p>Přidejte možnost mazání citátů ze seznamu:</p>
                      <ul>
                        <li>Vytvořte novou routu <code>/delete/<int:index></code></li>
                        <li>Implementujte funkci pro odstranění citátu podle indexu</li>
                        <li>Přidejte tlačítko "Smazat" ke každému citátu</li>
                      </ul>
                    </div>
                  </div>
                </div>
                
                <div class="col-md-6">
                  <div class="card mb-3">
                    <div class="card-body">
                      <h5 class="card-title">Editace citátů</h5>
                      <p>Umožněte uživatelům upravovat existující citáty:</p>
                      <ul>
                        <li>Vytvořte novou routu <code>/edit/<int:index></code></li>
                        <li>Implementujte formulář pro úpravu textu a autora</li>
                        <li>Přidejte tlačítko "Upravit" ke každému citátu</li>
                      </ul>
                    </div>
                  </div>
                </div>
                
                <div class="col-md-6">
                  <div class="card mb-3">
                    <div class="card-body">
                      <h5 class="card-title">Vyhledávání citátů</h5>
                      <p>Přidejte funkci pro vyhledávání v citátech:</p>
                      <ul>
                        <li>Vytvořte formulář pro vyhledávání</li>
                        <li>Implementujte routu <code>/search</code></li>
                        <li>Filtrujte citáty podle textu nebo autora</li>
                      </ul>
                    </div>
                  </div>
                </div>
                
                <div class="col-md-6">
                  <div class="card mb-3">
                    <div class="card-body">
                      <h5 class="card-title">Trvalé ukládání dat</h5>
                      <p>Implementujte ukládání citátů do souboru nebo databáze:</p>
                      <ul>
                        <li>Použijte SQLite pro ukládání citátů</li>
                        <li>Alternativně ukládejte do JSON souboru</li>
                        <li>Načítejte data při startu aplikace</li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <div class="alert alert-success mt-4">
        <h5 class="alert-heading"><i class="fas fa-lightbulb mr-2"></i> Tipy pro úspěšné dokončení</h5>
        <ul class="mb-0">
          <li>Ujistěte se, že všechny soubory jsou uloženy ve správných adresářích</li>
          <li>Používejte režim ladění (<code>debug=True</code>) pro snadnější nalezení chyb</li>
          <li>Postupujte krok za krokem a testujte každou novou funkci, než přidáte další</li>
          <li>Využívejte dokumentaci Flasku pro řešení problémů</li>
          <li>Nezapomeňte, že v reálné aplikaci byste měli data ukládat do databáze, ne do proměnné</li>
        </ul>
      </div>
      
      <div class="row mt-4">
        <div class="col-md-6">
          <div class="card">
            <div class="card-header bg-info text-white">
              <h5 class="mb-0">Očekávaný výsledek</h5>
            </div>
            <div class="card-body text-center">
              <img src="/img/python/web/quotes-app-preview.png" alt="Náhled výsledné aplikace" class="img-fluid border rounded shadow-sm">
              <p class="mt-2"><small>Přibližný vzhled výsledné aplikace</small></p>
            </div>
          </div>
        </div>
        <div class="col-md-6">
          <div class="card">
            <div class="card-header bg-warning text-dark">
              <h5 class="mb-0">Odevzdání</h5>
            </div>
            <div class="card-body">
              <p>Po dokončení projektu:</p>
              <ol>
                <li>Ujistěte se, že vaše aplikace funguje bez chyb</li>
                <li>Zkontrolujte, že všechny požadované funkce jsou implementovány</li>
                <li>Zazipujte celý adresář projektu</li>
                <li>Nahrajte ZIP soubor do učebního systému</li>
                <li>V komentáři popište případné rozšíření funkcionality nebo problémy, na které jste narazili</li>
              </ol>
            </div>
          </div>
        </div>
      </div>
      
    </div>
  </div>